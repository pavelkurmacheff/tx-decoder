/* eslint-disable max-len */
import { BigNumber } from "ethers";
import { DecodeResult } from "../../../core/decoder";
import { TransactionRaw } from "../../../core/transaction-raw";
import { decodeCurve as decodeCurve_ } from "./curve.decoder";

export function decodeCurve(tx: TransactionRaw): DecodeResult {
    return decodeCurve_('0xfa9a30350048b2bf66865ee20363067c66f67e58', tx);
}

describe('Curve swap test', () => {
    it('Swap exact native to custom', () => {
        const tx: TransactionRaw = {
            data: '0x0eb1d29900000000000000000000000000000000000000000000000000038d7ea4c6800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee000000000000000000000000dac17f958d2ee523a2206206994597c13d831ec7000000000000000000000000bebc44782c7db0a1a60cb6fe97d0b483032ff1c70000000000000000000000006b175474e89094c44da98b954eedeac495271d0f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000242d5a8cb1eab179',
            from: '0x6e797B975B99a20d539786e5c4a32218a3d6d80E',
            to: '0xfA9a30350048B2BF66865ee20363067c66f67e58',
            gasLimit: BigNumber.from('0x2c137'),
            gasPrice: BigNumber.from('0x163F29F8A1'),
            value: '30000000000000000'
        };

        const result = decodeCurve(tx);
        expect(result.tag).toEqual('Success');
        expect((result as any).tx.payload.dstTokenAddress).toEqual('0x6b175474e89094c44da98b954eedeac495271d0f');
    });

    it('Swap exact custom to native', () => {
        // TODO
    });
});